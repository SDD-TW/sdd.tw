Feature: 網頁化報名表單功能（賽博龐克風格多步驟版本）
  
  作為想加入 SDD 社群的新成員，
  我想要通過一個帥氣的多步驟表單來完成報名，
  讓整個報名過程充滿儀式感和成就感。
  
  背景：
    - 業務目標：提升報名體驗，增加完成率和用戶滿意度
    - 用戶痛點：Google Form 單調乏味，缺乏引導，容易填錯
    - 視覺設計：賽博龐克風格，霓虹色彩，流暢動畫
    - 時程：2025-10-28 開始開發（P0）
    - 技術棧：Next.js 15 + Tailwind CSS + Google Apps Script API
    - 測試策略：雙層測試架構（使用者流程 + 組件布局）

# ====================================
# Layer 1: 使用者流程測試 (User Journey Testing)
# ====================================
# 目標：驗證完整的用戶使用流程和行為
# 範圍：端到端的用戶操作流程、跨步驟的數據傳遞、用戶體驗和互動行為
# 方法：E2E 測試、用戶接受度測試、整合測試

# ====================================
# Epic 1: 完整報名流程
# ====================================

Scenario: 完整報名流程 - 一般用戶
  Given 我訪問 "/onboarding/register" 頁面
  When 我完成完整的報名流程：
    | 步驟 | 操作 | 資料 |
    | 1 | 填寫基本資訊 | Email: test@example.com, 暱稱: TestUser, Discord ID: 123456789012345678 |
    | 2 | 綁定第三方帳號 | GitHub: testuser, Accupass: test@accupass.com |
    | 3 | 完成社群任務 | 勾選所有社群追蹤任務 |
    | 4 | 確認並提交 | 勾選確認框，點擊提交 |
  Then 我應該成功提交報名
  And 頁面應該跳轉到 "/onboarding/success"
  And 成功頁面應該顯示歡迎訊息
  And 系統應該記錄完整的追蹤事件

Scenario: 完整報名流程 - 課金玩家
  Given 我訪問 "/onboarding/register" 頁面
  And 我的 Email "coomysky@gmail.com" 在學員資料表中
  When 我完成完整的報名流程：
    | 步驟 | 操作 | 資料 |
    | 1 | 填寫基本資訊 | Email: coomysky@gmail.com, 暱稱: Coomy, Discord ID: 123456789012345678 |
    | 2 | 綁定第三方帳號 | GitHub: coomychang, Accupass: coomy@accupass.com |
    | 3 | 完成社群任務 | 勾選所有社群追蹤任務 |
    | 4 | 確認並提交 | 勾選確認框，點擊提交 |
  Then 我應該成功提交報名
  And 系統應該識別我為課金玩家
  And 系統應該發送 GitHub 協作邀請
  And 系統應該發送 Discord 歡迎通知
  And 成功頁面應該顯示課金玩家專屬內容
  And 系統應該記錄 "CHARGE_MEMBER_JOINED" 事件

Scenario: 報名流程 - 中途放棄
  Given 我訪問 "/onboarding/register" 頁面
  When 我在步驟 2 時關閉瀏覽器
  Then 系統應該記錄追蹤事件：
    | 欄位 | 值 |
    | 事件類型 | "中途離開" |
    | 當前步驟 | 2 |
    | 最遠步驟 | 2 |
    | 完成狀態 | 未完成 |

Scenario: 報名流程 - 重複 Email 提交
  Given 我已經用 "test@example.com" 完成過報名
  When 我再次嘗試用相同 Email 報名
  Then 系統應該顯示錯誤訊息 "此 Email 已存在於系統中"
  And 不應該允許重複提交

# ====================================
# Epic 2: 跨步驟數據傳遞
# ====================================

Scenario: 步驟間數據保持
  Given 我在步驟 1 填寫了 Email "test@example.com"
  When 我進入步驟 2
  And 我回到步驟 1
  Then Email 欄位應該仍然顯示 "test@example.com"
  And 所有驗證狀態應該保持

Scenario: 修改數據流程
  Given 我在步驟 4 看到資訊摘要
  When 我點擊 Email 旁邊的 "修改" 按鈕
  Then 我應該回到步驟 1
  And Email 欄位應該顯示之前填寫的值
  And 我可以修改 Email
  When 我修改完成後點擊 "下一步"
  Then 我應該回到步驟 4
  And 資訊摘要應該顯示修改後的值

# ====================================
# Epic 3: 用戶體驗和互動行為
# ====================================

Scenario: 頁面滾動行為
  Given 我在步驟 1 填寫表單
  And 我滾動到頁面下方
  When 我點擊 "下一步" 按鈕
  Then 頁面應該自動滾動到頂部
  And 步驟 2 的內容應該完全可見

Scenario: 表單提交滾動行為
  Given 我在步驟 4 準備提交
  And 我滾動到頁面下方
  When 我點擊 "提交報名" 按鈕
  Then 頁面應該自動滾動到頂部
  And 載入動畫應該在視窗頂部可見

Scenario: 步驟指示器互動
  Given 我已經完成步驟 1 和 2
  When 我點擊步驟指示器中的 "步驟 1"
  Then 我應該回到步驟 1
  And 頁面應該滾動到頂部
  And 我可以查看和修改步驟 1 的資料

# ====================================
# Layer 2: 組件布局測試 (Component Layout Testing)
# ====================================
# 目標：驗證介面組件和布局的正確性
# 範圍：組件渲染和顯示、布局結構和響應式設計、組件間的數據傳遞、UI 狀態管理
# 方法：組件測試、視覺回歸測試、單元測試

# ====================================
# Epic 4: 步驟 1 - 基本資訊組件
# ====================================

Scenario: 步驟 1 組件渲染
  Given 我在步驟 1（基本資訊）
  When 組件載入完成
  Then 我應該看到以下組件正確渲染：
    | 組件 | 描述 | 狀態 |
    | 主標題 | "第一步：填寫你的基本聯絡資訊" | 白色，24px 粗體 |
    | 副標題 | "這些資訊將用於身份驗證和後續聯繫 🚀" | 淺灰色，16px |
    | Email 欄位 | 標籤、輸入框、必填標示 | 正確樣式 |
    | 暱稱欄位 | 標籤、輸入框、字數計數器 | 正確樣式 |
    | Discord ID 欄位 | 標籤、輸入框、說明文字 | 正確樣式 |
    | Discord ID 指引 | 藍色提示框、步驟說明、FAQ | 可摺疊 |
    | 下一步按鈕 | 霓虹藍色按鈕 | 禁用狀態 |

Scenario: Email 欄位組件狀態
  Given 我在步驟 1（基本資訊）
  When Email 欄位組件渲染
  Then 欄位應該呈現正確的初始狀態：
    | 屬性 | 值 |
    | 標籤文字 | "Email" |
    | 必填標示 | 紅色星號 "*" |
    | 邊框顏色 | 灰色（#4a5568） |
    | 背景色 | 半透明深色 |
    | Placeholder | "例如：user@example.com" |
    | 驗證圖示 | 無 |
    | 錯誤訊息 | 無 |

Scenario: Email 欄位 Focus 狀態
  Given 我在步驟 1（基本資訊）
  And Email 欄位處於未聚焦狀態
  When 我點擊 Email 欄位
  Then 欄位應該進入 Focus 狀態：
    | 屬性 | 值 |
    | 邊框顏色 | 霓虹藍（#00F0FF） |
    | 陰影效果 | 霓虹藍色光暈 |
    | 過渡動畫 | 0.2 秒平滑過渡 |

Scenario: Email 驗證狀態組件
  Given 我在步驟 1（基本資訊）
  And 我在 Email 欄位輸入 "test@example.com"
  When 驗證完成
  Then 驗證狀態組件應該正確顯示：
    | 狀態 | 圖示 | 顏色 | 訊息 |
    | 載入中 | 旋轉動畫 | 霓虹藍 | 無 |
    | 成功 | 綠色勾勾 | 霓虹綠 | "✓ Email 格式正確" |
    | 錯誤 | 紅色叉叉 | 紅色 | "✗ Email 格式不正確" |

Scenario: Discord ID 指引組件
  Given 我在步驟 1（基本資訊）
  When Discord ID 指引組件渲染
  Then 我應該看到：
    | 元素 | 描述 | 樣式 |
    | 提示框 | 藍色背景，邊框 | bg-blue-500/10, border-blue-500/30 |
    | 問號圖示 | 圓形藍色背景 | w-6 h-6 bg-blue-500 |
    | 步驟說明 | 4 個步驟的詳細說明 | 清楚編號，藍色數字 |
    | 視覺化範例 | 頭像和 ID 範例 | 紫色頭像，等寬字體 |
    | FAQ 區塊 | 可摺疊的常見問題 | <details> 標籤 |

Scenario: 暱稱欄位組件
  Given 我在步驟 1（基本資訊）
  When 暱稱欄位組件渲染
  Then 我應該看到：
    | 元素 | 描述 | 狀態 |
    | 標籤 | "暱稱/Discord 名稱" | 白色文字 |
    | 必填標示 | 紅色星號 "*" | 位於標籤右側 |
    | 輸入框 | Placeholder: "例如： Waterball" | 淺灰色 |
    | 字數計數器 | "0 / 50" | 右下角，淺灰色 |
    | 提示框 | 綠色背景的暱稱說明 | bg-green-500/10 |

Scenario: 下一步按鈕組件狀態
  Given 我在步驟 1（基本資訊）
  When 下一步按鈕組件渲染
  Then 按鈕應該根據表單狀態正確顯示：
    | 表單狀態 | 按鈕狀態 | 樣式 |
    | 未完成 | 禁用 | 灰色背景，淺灰色文字 |
    | 已完成 | 啟用 | 霓虹藍漸層，白色文字 |
    | 載入中 | 載入 | 旋轉圖示，禁用點擊 |

# ====================================
# Epic 5: 步驟 2 - 第三方帳號組件
# ====================================

Scenario: 步驟 2 組件渲染
  Given 我在步驟 2（第三方帳號綁定）
  When 組件載入完成
  Then 我應該看到以下組件正確渲染：
    | 組件 | 描述 | 狀態 |
    | 主標題 | "第二步：綁定你的第三方帳號" | 白色，24px 粗體 |
    | 副標題 | "這些帳號將用於身份驗證和權限管理 🔐" | 淺灰色，16px |
    | GitHub 欄位 | 標籤、輸入框、說明文字 | 正確樣式 |
    | GitHub 頭像 | 預覽區域 | 32px x 32px |
    | Accupass 欄位 | 標籤、輸入框、選填標示 | 正確樣式 |
    | 下一步按鈕 | 霓虹藍色按鈕 | 根據驗證狀態 |

Scenario: GitHub 驗證組件
  Given 我在步驟 2（第三方帳號綁定）
  And 我在 GitHub 欄位輸入 "coomychang"
  When GitHub 驗證完成
  Then 驗證組件應該正確顯示：
    | 狀態 | 圖示 | 顏色 | 訊息 | 頭像 |
    | 載入中 | 旋轉動畫 | 霓虹藍 | 無 | 無 |
    | 成功 | 綠色勾勾 | 霓虹綠 | "✓ GitHub 用戶存在" | 顯示 |
    | 錯誤 | 紅色叉叉 | 紅色 | "✗ GitHub 用戶不存在" | 無 |
    | API 失敗 | 警告圖示 | 黃色 | "⚠ 無法驗證 GitHub 用戶" | 無 |

# ====================================
# Epic 6: 步驟 3 - 社群任務組件
# ====================================

Scenario: 步驟 3 組件渲染
  Given 我在步驟 3（社群參與任務）
  When 組件載入完成
  Then 我應該看到以下組件正確渲染：
    | 組件 | 描述 | 狀態 |
    | 主標題 | "第三步：完成社群參與任務" | 白色，24px 粗體 |
    | 副標題 | "這些任務將幫助你更好地融入社群 🌟" | 淺灰色，16px |
    | FB 粉絲頁任務 | Checkbox + 連結 | 未勾選 |
    | Threads 任務 | Checkbox + 連結 | 未勾選 |
    | FB 群組任務 | Checkbox + 連結 | 未勾選 |
    | LINE 官方帳號任務 | Checkbox + 連結 | 未勾選 |
    | Discord 確認任務 | Checkbox + 連結 | 未勾選 |
    | 下一步按鈕 | 霓虹藍色按鈕 | 禁用狀態 |

Scenario: 社群任務 Checkbox 組件
  Given 我在步驟 3（社群參與任務）
  When 社群任務組件渲染
  Then 每個任務應該正確顯示：
    | 元素 | 描述 | 樣式 |
    | Checkbox | 霓虹藍色勾選框 | 未勾選狀態 |
    | 任務標題 | 任務名稱 | 白色文字 |
    | 任務描述 | 詳細說明 | 淺灰色文字 |
    | 連結按鈕 | "前往" 按鈕 | 霓虹藍色，新視窗開啟 |
    | 完成狀態 | 勾選後的樣式 | 綠色勾選框，完成文字 |

Scenario: 步驟 3 驗證組件
  Given 我在步驟 3（社群參與任務）
  When 我嘗試點擊 "下一步" 按鈕
  And 我還沒有勾選所有任務
  Then 系統應該顯示驗證錯誤：
    | 元素 | 描述 | 樣式 |
    | 錯誤訊息 | "請完成所有社群參與任務" | 紅色文字 |
    | 按鈕狀態 | 保持禁用 | 灰色背景 |
    | 任務高亮 | 未完成的任務 | 紅色邊框提示 |

# ====================================
# Epic 7: 步驟 4 - 確認提交組件
# ====================================

Scenario: 步驟 4 組件渲染
  Given 我在步驟 4（確認與提交）
  When 組件載入完成
  Then 我應該看到以下組件正確渲染：
    | 組件 | 描述 | 狀態 |
    | 主標題 | "第四步：確認你的報名資訊" | 白色，24px 粗體 |
    | 副標題 | "請仔細檢查所有資訊，確認無誤後提交 ✨" | 淺灰色，16px |
    | 資訊摘要 | 所有填寫的資料 | 清楚顯示 |
    | 修改按鈕 | 每個欄位旁邊的修改按鈕 | 霓虹藍色 |
    | 確認勾選框 | "我確認以上資訊正確" | 未勾選 |
    | 提交按鈕 | "提交報名" | 禁用狀態 |

Scenario: 資訊摘要組件
  Given 我在步驟 4（確認與提交）
  When 資訊摘要組件渲染
  Then 我應該看到：
    | 欄位 | 顯示內容 | 樣式 |
    | Email | 顯示填寫的 Email | 白色文字 |
    | 暱稱 | 顯示填寫的暱稱 | 白色文字 |
    | Discord ID | 顯示填寫的 Discord ID | 白色文字 |
    | GitHub | GitHub Username + 頭像 | 白色文字 + 32px 頭像 |
    | Accupass | 顯示填寫的 Accupass Email | 白色文字或 "未填寫" |
    | 社群任務 | 顯示完成狀態 | 綠色勾勾或紅色叉叉 |

Scenario: 提交按鈕組件狀態
  Given 我在步驟 4（確認與提交）
  When 提交按鈕組件渲染
  Then 按鈕應該根據確認狀態正確顯示：
    | 確認狀態 | 按鈕狀態 | 樣式 |
    | 未勾選 | 禁用 | 灰色背景，淺灰色文字 |
    | 已勾選 | 啟用 | 霓虹藍漸層，白色文字 |
    | 提交中 | 載入 | 旋轉圖示，禁用點擊 |
    | 提交成功 | 成功 | 綠色背景，成功圖示 |
    | 提交失敗 | 錯誤 | 紅色背景，錯誤圖示 |

# ====================================
# Epic 8: 成功頁面組件
# ====================================

Scenario: 成功頁面組件渲染
  Given 我成功提交了報名表單
  When 成功頁面組件載入完成
  Then 我應該看到：
    | 組件 | 描述 | 狀態 |
    | 成功動畫 | CheckCircle + 脈衝效果 | 持續播放 |
    | 主標題 | "🎉 報名成功！" | 白色，32px 粗體 |
    | 副標題 | "歡迎加入臺灣規格驅動開發社群！" | 淺灰色，18px |
    | 學號顯示 | "你的學號：2191"（課金玩家） | 霓虹藍色 |
    | 後續步驟 | 4 個步驟的說明 | 清楚圖示和文字 |
    | Discord 按鈕 | "立即加入 Discord" | 霓虹藍色 |
    | 學習旅程 | 視覺化學習階段 | 3 個階段圓圈 |

Scenario: 課金玩家成功頁面組件
  Given 我以課金玩家身份成功提交報名
  When 成功頁面組件載入完成
  Then 我應該看到課金玩家專屬組件：
    | 組件 | 描述 | 狀態 |
    | 身份確認 | "你是課金玩家！" | 霓虹藍色高亮 |
    | GitHub 邀請 | "GitHub 協作邀請已發送" | 已完成狀態 |
    | Discord 通知 | "Discord 歡迎通知已發送" | 已完成狀態 |
    | 學習旅程 | 課金玩家專屬 3 階段 | 課金玩家 → 水球軟體學院 → SDD 專家 |
    | 水球軟體學院 | 可點擊的課程連結 | 新視窗開啟 |
    | 專屬按鈕 | 研究員交流區 + 排行榜 | 霓虹藍色漸層 |

Scenario: 學習旅程組件
  Given 我在成功頁面
  When 學習旅程組件渲染
  Then 我應該看到：
    | 元素 | 描述 | 樣式 |
    | 容器 | 水平居中布局 | justify-center |
    | 階段圓圈 | 3 個圓形階段 | 20px x 20px |
    | 連接線 | 階段間的連接線 | 16px 寬度，灰色 |
    | 階段圖示 | 每個階段的圖示 | 居中顯示 |
    | 階段文字 | 階段名稱和描述 | 清楚層次 |
    | 水球軟體學院 | 可點擊連結 | hover 效果 |

# ====================================
# Epic 9: 響應式布局組件
# ====================================

Scenario: 手機版布局組件
  Given 我使用手機瀏覽器訪問報名表單
  When 頁面組件載入完成
  Then 所有組件應該適應手機螢幕：
    | 組件 | 手機版調整 |
    | 容器 | 100% 寬度，左右邊距 16px |
    | 標題 | 24px（桌面版 32px） |
    | 副標題 | 14px（桌面版 16px） |
    | 輸入欄位 | 全寬度，內邊距調整 |
    | 按鈕 | 全寬度，高度 48px |
    | 步驟指示器 | 簡化顯示 |
    | Discord ID 指引 | 可摺疊，節省空間 |

Scenario: 平板版布局組件
  Given 我使用平板瀏覽器訪問報名表單
  When 頁面組件載入完成
  Then 所有組件應該適應平板螢幕：
    | 組件 | 平板版調整 |
    | 容器 | 80% 最大寬度，居中顯示 |
    | 標題 | 28px（介於手機和桌面之間） |
    | 副標題 | 15px |
    | 輸入欄位 | 適當寬度，保持良好比例 |
    | 按鈕 | 適當寬度，不強制全寬 |
    | 學習旅程 | 保持水平布局 |

# ====================================
# Epic 10: 動畫和互動組件
# ====================================

Scenario: 步驟切換動畫組件
  Given 我在步驟 1
  When 我點擊 "下一步" 按鈕
  Then 步驟切換動畫組件應該正確執行：
    | 動畫 | 描述 | 持續時間 |
    | 淡出 | 步驟 1 內容淡出 | 0.15 秒 |
    | 淡入 | 步驟 2 內容淡入 | 0.15 秒 |
    | 進度條 | 25% → 50% 平滑過渡 | 0.3 秒 |
    | 步驟指示器 | 1/4 → 2/4 更新 | 0.2 秒 |

Scenario: 驗證狀態動畫組件
  Given 我在 Email 欄位輸入 "test@example.com"
  When 驗證狀態改變
  Then 驗證動畫組件應該正確執行：
    | 狀態 | 動畫 | 持續時間 |
    | 載入中 | 旋轉動畫 | 持續 |
    | 成功 | 從小到大彈出 | 0.3 秒 |
    | 錯誤 | 輕微晃動 | 0.5 秒 |

Scenario: 成功頁面動畫組件
  Given 我成功提交報名
  When 成功頁面載入
  Then 成功動畫組件應該正確執行：
    | 動畫 | 描述 | 持續時間 |
    | CheckCircle | 淡入效果 | 0.5 秒 |
    | 脈衝效果 | 持續脈衝 | 2 秒循環 |
    | 文字動畫 | 逐行淡入 | 0.3 秒間隔 |
    | 學習旅程 | 階段逐一出現 | 0.2 秒間隔 |

# ====================================
# Epic 11: 錯誤處理組件
# ====================================

Scenario: Toast 通知組件
  Given 我在填寫表單時發生錯誤
  When 系統顯示錯誤通知
  Then Toast 通知組件應該正確顯示：
    | 屬性 | 值 |
    | 位置 | 右上角固定 |
    | 背景 | 半透明深色 |
    | 邊框 | 霓虹藍色 |
    | 陰影 | 霓虹藍色光暈 |
    | 動畫 | 從右滑入 |
    | 自動消失 | 5 秒後 |

Scenario: 載入狀態組件
  Given 我在提交表單
  When 提交正在進行中
  Then 載入狀態組件應該正確顯示：
    | 元素 | 描述 | 樣式 |
    | 載入圖示 | 👤 圖示 | 4xl 大小 |
    | 載入文字 | "提交中..." | 白色文字 |
    | 背景遮罩 | 半透明黑色 | 覆蓋整個表單 |
    | 動畫 | 持續顯示 | 直到完成 |

# ====================================
# Epic 12: 效能和記憶體組件
# ====================================

Scenario: 組件記憶體管理
  Given 我在填寫報名表單
  When 我長時間停留在頁面上
  Then 組件應該正確管理記憶體：
    | 行為 | 描述 |
    | 無記憶體洩漏 | 長時間使用不影響效能 |
    | 正確清理 | 頁面卸載時清理資源 |
    | 狀態管理 | 正確管理組件狀態 |
    | 事件監聽 | 正確移除事件監聽器 |

Scenario: 組件渲染效能
  Given 我在填寫報名表單
  When 組件重新渲染
  Then 組件應該保持良好效能：
    | 指標 | 要求 |
    | 渲染時間 | < 100ms |
    | 動畫流暢 | 60fps |
    | 記憶體使用 | 穩定 |
    | CPU 使用 | 低負載 |

---

**Feature 建立時間**: 2025-10-28 14:30  
**最後更新**: 2025-10-28 18:45  
**建立者**: Coomy + AI Assistant  
**版本**: v2.0  
**對應 User Story**: user-story-onboarding-form-2025-10-28.md  
**測試策略**: 雙層測試架構（使用者流程 + 組件布局）  
**狀態**: Phase 1 已完成，Phase 2 測試進行中