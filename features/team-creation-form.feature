Feature: 組隊表單功能（豪華多步驟版本）
  
  作為隊長（正式成員或課金玩家），
  我想要通過一個帥氣的多步驟表單來創建我的隊伍，
  讓整個組隊過程充滿儀式感和成就感。
  
  背景：
    - 業務目標：提升組隊體驗，增加參與感和興奮度
    - 用戶痛點：傳統表單單調乏味，缺乏引導，容易填錯
    - 視覺設計：賽博龐克風格，霓虹色彩，流暢動畫
    - 時程：2025-10-21 20:00 上線（P0）

# ====================================
# Epic 1: 步驟 1 - 隊伍基本資訊
# ====================================

Scenario: 進入組隊表單首頁
  Given 我是已登入的正式成員或課金玩家
  And 我訪問 "/team/create" 頁面
  When 頁面載入完成
  Then 我應該看到賽博龐克風格的表單頁面，包含：
    | 元素         | 描述                                    |
    | 標題         | "創建你的隊伍" 大標題，霓虹藍色漸層      |
    | 副標題       | "開始你的冒險之旅" 小標題，淺灰色        |
    | 步驟指示器   | 顯示 "1/4"，當前步驟高亮為霓虹藍色       |
    | 背景         | 深色背景（#0a0e27），微妙的掃描線動畫    |
    | 動畫背景     | AnimatedBackground 元件，粒子效果        |
  And 步驟指示器應該以動畫方式進入畫面（從上滑入，持續 0.3 秒）

Scenario: 步驟 1 的引導說明
  Given 我在步驟 1（隊伍基本資訊）
  When 我查看頁面頂部的說明區域
  Then 我應該看到清楚的引導文字：
    | 欄位     | 內容                                      |
    | 主標題   | "第一步：為你的隊伍取一個帥氣的名字！"     |
    | 副標題   | "隊名將會顯示在排行榜上，好好發揮創意吧 🚀" |
    | 文字顏色 | 主標題：白色（#ffffff），副標題：淺灰（#a0aec0） |
    | 字體     | 主標題：24px 粗體，副標題：16px 正常        |

Scenario: 隊名輸入欄位的初始狀態
  Given 我在步驟 1（隊伍基本資訊）
  When 我查看隊名輸入欄位
  Then 欄位應該呈現以下視覺狀態：
    | 屬性          | 值                                         |
    | 標籤文字      | "隊伍名稱"                                 |
    | 必填標示      | 紅色星號 "*"，位於標籤文字右側              |
    | 邊框顏色      | 灰色（#4a5568），1px 實線                  |
    | 背景色        | 半透明深色（rgba(26, 32, 44, 0.8)）        |
    | Placeholder   | "例如：賽博戰士隊"，淺灰色（#718096）      |
    | 圓角          | 8px                                        |
    | 內邊距        | 12px                                       |
    | 字體大小      | 16px                                       |

Scenario: 隊名輸入欄位的 Focus 狀態
  Given 我在步驟 1（隊伍基本資訊）
  And 隊名輸入欄位處於未聚焦狀態
  When 我點擊隊名輸入欄位
  Then 欄位應該立即進入 Focus 狀態，呈現：
    | 屬性        | 值                                           |
    | 邊框顏色    | 霓虹藍（#00F0FF），2px 實線                  |
    | 陰影效果    | 霓虹藍色光暈（box-shadow: 0 0 12px #00F0FF） |
    | 過渡動畫    | 0.2 秒平滑過渡（transition）                 |
    | 背景色      | 保持半透明深色                                |
  And Focus 狀態的改變應該有流暢的動畫效果

Scenario: 隊名即時檢查 - 輸入中
  Given 我在步驟 1（隊伍基本資訊）
  And 隊名輸入欄位為空白
  When 我在隊名欄位輸入 "賽博"
  And 我持續輸入，還沒停止
  Then 欄位右側應該不顯示任何檢查圖示
  And 不應該觸發 API 調用

Scenario: 隊名即時檢查 - 載入中
  Given 我在步驟 1（隊伍基本資訊）
  And 我在隊名欄位輸入 "賽博戰士隊"
  When 我停止輸入超過 500ms
  Then 欄位右側應該顯示 loading 動畫：
    | 屬性      | 值                                    |
    | 圖示      | 旋轉的圓圈或霓虹風格的六邊形           |
    | 顏色      | 霓虹藍（#00F0FF）                      |
    | 大小      | 20px x 20px                           |
    | 動畫      | 持續旋轉，1 秒完成一圈                 |
    | 位置      | 輸入框內右側，距離右邊緣 12px          |
  And API 調用應該在背景執行（debounce 500ms）

Scenario: 隊名即時檢查 - 隊名可用
  Given 我在步驟 1（隊伍基本資訊）
  And 我輸入了隊名 "賽博新星隊"
  And API 檢查正在進行中
  When API 回傳 `{ available: true }`
  Then 載入動畫應該消失
  And 欄位右側應該顯示成功圖示：
    | 屬性      | 值                                    |
    | 圖示      | 綠色勾勾（✓）                          |
    | 顏色      | 霓虹綠（#00FF9F）                      |
    | 大小      | 20px x 20px                           |
    | 動畫      | 從小到大彈出（scale 0 → 1，0.3 秒）   |
    | 光暈      | 微妙的綠色光暈                         |
  And 欄位下方應該顯示成功訊息：
    | 屬性      | 值                                    |
    | 文字      | "✓ 此隊名可用"                         |
    | 顏色      | 霓虹綠（#00FF9F）                      |
    | 字體大小  | 14px                                  |
    | 圖示動畫  | 淡入效果（fade in，0.2 秒）            |

Scenario: 隊名即時檢查 - 隊名重複
  Given 我在步驟 1（隊伍基本資訊）
  And 我輸入了隊名 "測試隊伍"
  And API 檢查正在進行中
  When API 回傳 `{ available: false }`
  Then 載入動畫應該消失
  And 欄位右側應該顯示錯誤圖示：
    | 屬性      | 值                                    |
    | 圖示      | 紅色叉叉（✗）                          |
    | 顏色      | 紅色（#F56565）                        |
    | 大小      | 20px x 20px                           |
    | 動畫      | 輕微晃動效果（shake，0.5 秒）          |
  And 欄位邊框應該變為紅色（#F56565）
  And 欄位下方應該顯示錯誤訊息：
    | 屬性      | 值                                    |
    | 文字      | "✗ 此隊名已被使用，請更換"              |
    | 顏色      | 紅色（#F56565）                        |
    | 字體大小  | 14px                                  |
    | 動畫      | 淡入效果（fade in，0.2 秒）            |

Scenario: 隊伍簡介輸入欄位
  Given 我在步驟 1（隊伍基本資訊）
  When 我查看隊伍簡介輸入欄位
  Then 欄位應該呈現以下視覺狀態：
    | 屬性          | 值                                         |
    | 標籤文字      | "隊伍簡介（選填）"                         |
    | 欄位類型      | 多行文字框（textarea）                     |
    | 高度          | 100px（約 4-5 行）                         |
    | Placeholder   | "簡單描述你的隊伍目標或特色..."             |
    | 最大字數      | 200 字元                                   |
    | 字數顯示      | 右下角顯示 "0 / 200"，淺灰色               |
  And 當我輸入文字時，字數計數器應該即時更新

Scenario: 隊伍簡介字數限制
  Given 我在步驟 1（隊伍基本資訊）
  And 隊伍簡介欄位已經有 190 個字元
  When 我再輸入 15 個字元（超過 200 字元限制）
  Then 輸入應該被阻止，欄位只接受到第 200 個字元
  And 字數顯示應該變為紅色：
    | 屬性          | 值                                    |
    | 文字          | "200 / 200"                           |
    | 顏色          | 紅色（#F56565）                        |
    | 字體粗細      | 粗體（bold）                           |

Scenario: 步驟 1 的「下一步」按鈕 - Disabled 狀態
  Given 我在步驟 1（隊伍基本資訊）
  And 隊名欄位為空白（必填未填）
  When 我查看「下一步」按鈕
  Then 按鈕應該呈現 Disabled 狀態：
    | 屬性        | 值                                    |
    | 背景色      | 深灰色（#2d3748）                      |
    | 文字顏色    | 淺灰色（#718096）                      |
    | 邊框        | 無                                     |
    | 陰影        | 無                                     |
    | 游標        | not-allowed                            |
    | 不透明度    | 0.6                                    |
  And 當我嘗試點擊時，按鈕不應該有任何反應

Scenario: 步驟 1 的「下一步」按鈕 - 可用狀態
  Given 我在步驟 1（隊伍基本資訊）
  And 隊名欄位已填寫且可用（綠色勾勾）
  When 我查看「下一步」按鈕
  Then 按鈕應該呈現可用狀態：
    | 屬性        | 值                                         |
    | 背景色      | 霓虹藍漸層（linear-gradient #00F0FF → #0080FF） |
    | 文字顏色    | 白色（#ffffff）                             |
    | 文字        | "下一步：填寫隊長資訊 →"                     |
    | 字體粗細    | 粗體（bold）                                |
    | 圓角        | 8px                                        |
    | 內邊距      | 14px 28px                                  |
    | 陰影        | 霓虹藍色光暈（box-shadow: 0 0 20px #00F0FF）|
    | 游標        | pointer                                    |

Scenario: 步驟 1 的「下一步」按鈕 - Hover 狀態
  Given 我在步驟 1（隊伍基本資訊）
  And「下一步」按鈕處於可用狀態
  When 我將滑鼠懸停在按鈕上
  Then 按鈕應該有 Hover 效果：
    | 屬性        | 值                                         |
    | 背景色      | 漸層顏色變亮 10%                            |
    | 陰影        | 光暈增強（box-shadow: 0 0 30px #00F0FF）    |
    | 縮放        | 輕微放大 scale(1.02)                        |
    | 過渡        | 所有變化 0.2 秒平滑過渡                     |

Scenario: 點擊「下一步」切換到步驟 2
  Given 我在步驟 1（隊伍基本資訊）
  And 所有必填欄位已正確填寫
  And「下一步」按鈕處於可用狀態
  When 我點擊「下一步」按鈕
  Then 頁面應該平滑過渡到步驟 2：
    | 動畫效果    | 描述                                       |
    | 淡出        | 步驟 1 內容淡出（fade out，0.2 秒）         |
    | 滑動        | 步驟 2 內容從右側滑入（slide in，0.3 秒）   |
    | 步驟指示器  | 數字更新為 "2/4"，高亮移動                  |
  And 步驟 1 的資料應該被保存，不會遺失

# ====================================
# Epic 2: 步驟 2 - 隊長資訊
# ====================================

Scenario: 進入步驟 2
  Given 我從步驟 1 點擊「下一步」
  When 我進入步驟 2（隊長資訊）
  Then 我應該看到步驟 2 的頁面，包含：
    | 元素         | 描述                                    |
    | 步驟指示器   | 顯示 "2/4"，高亮為霓虹藍色               |
    | 主標題       | "第二步：讓我們認識你！"                 |
    | 副標題       | "這些資訊將用於隊伍管理和通知 📢"         |
    | 上一步按鈕   | 顯示於左下角，可點擊                     |
  And 應該有平滑的進入動畫

Scenario: 步驟 2 的「上一步」按鈕
  Given 我在步驟 2（隊長資訊）
  When 我查看「上一步」按鈕
  Then 按鈕應該呈現次要樣式：
    | 屬性        | 值                                    |
    | 背景色      | 透明                                   |
    | 邊框        | 1px 霓虹藍色（#00F0FF）                |
    | 文字顏色    | 霓虹藍色（#00F0FF）                     |
    | 文字        | "← 上一步"                             |
    | 內邊距      | 10px 20px                             |
  And 當我 hover 時，背景應該變為半透明霓虹藍（rgba(0, 240, 255, 0.1)）

Scenario: GitHub Username 輸入欄位驗證 - 格式錯誤
  Given 我在步驟 2（隊長資訊）
  When 我在 GitHub Username 欄位輸入 "invalid name!"（含空格和特殊字元）
  And 我移開焦點（blur）
  Then 欄位應該顯示錯誤狀態：
    | 屬性        | 值                                         |
    | 邊框顏色    | 紅色（#F56565），2px 實線                  |
    | 陰影        | 紅色光暈（box-shadow: 0 0 8px #F56565）    |
    | 錯誤訊息    | "GitHub Username 只能包含字母、數字和連字號" |
    | 訊息顏色    | 紅色（#F56565）                            |
    | 訊息位置    | 欄位下方，淡入動畫                          |
  And「下一步」按鈕應該保持 disabled 狀態

Scenario: Discord ID 輸入欄位驗證 - 格式錯誤（非純數字）
  Given 我在步驟 2（隊長資訊）
  When 我在 Discord ID 欄位輸入 "12345abc"（包含非數字字元）
  And 我移開焦點（blur）
  Then 欄位應該顯示錯誤狀態：
    | 屬性        | 值                                         |
    | 邊框顏色    | 紅色（#F56565）                            |
    | 錯誤訊息    | "Discord ID 必須是數字組成的字串"          |
    | 訊息顏色    | 紅色（#F56565）                            |
    | 圖示        | 警告圖示（⚠），淡入動畫                    |

Scenario: Discord ID 輸入欄位 - 「如何找到我的 Discord ID？」連結
  Given 我在步驟 2（隊長資訊）
  When 我查看 Discord ID 欄位下方的說明
  Then 我應該看到一個幫助連結：
    | 屬性        | 值                                         |
    | 文字        | "如何找到我的 Discord ID？"                 |
    | 顏色        | 霓虹藍（#00F0FF）                          |
    | 樣式        | 下劃線（hover 時）                         |
    | 圖示        | 問號圖示（?），旁邊                         |
  And 當我點擊連結時，應該開啟新視窗顯示教學文件

Scenario: 步驟 2 的「下一步」按鈕 - 全部驗證通過
  Given 我在步驟 2（隊長資訊）
  And 所有欄位都已正確填寫：
    | 欄位                  | 值                    |
    | GitHub Username       | octocat               |
    | 暱稱                  | Alex                  |
    | Discord ID            | 123456789012345678    |
  When 我查看「下一步」按鈕
  Then 按鈕應該變為可用狀態（霓虹藍色，有光暈）
  And 按鈕文字應該是："下一步：新增隊員 →"

# ====================================
# Epic 3: 步驟 3 - 成員資訊
# ====================================

Scenario: 進入步驟 3 - 預設顯示
  Given 我從步驟 2 點擊「下一步」
  When 我進入步驟 3（成員資訊）
  Then 我應該看到：
    | 元素         | 描述                                    |
    | 步驟指示器   | 顯示 "3/4"                              |
    | 主標題       | "第三步：召集你的隊友！"                 |
    | 副標題       | "至少需要 2 人，最多 6 人組隊 👥"        |
    | 成員 2 欄位  | 顯示，標記為必填                         |
    | 成員 3 欄位  | 顯示，標記為選填                         |
    | 成員 4-6 欄位| 隱藏（尚未顯示）                         |
  And 所有欄位都應該有一致的賽博龐克風格

Scenario: 動態顯示成員欄位
  Given 我在步驟 3（成員資訊）
  And 目前只顯示成員 2 和成員 3 欄位
  And 成員 3 欄位為空白
  When 我在成員 3 欄位輸入有效的 Discord ID
  And Discord ID 驗證通過（純數字格式）
  Then 成員 4 欄位應該自動出現：
    | 動畫        | 從上滑入（slide down），0.3 秒           |
    | 不透明度    | 從 0 淡入到 1，0.3 秒                   |
  And 成員 4 欄位應該標記為「選填」

Scenario: 成員欄位的視覺一致性
  Given 我在步驟 3（成員資訊）
  When 我檢查所有顯示的成員欄位
  Then 每個欄位都應該有相同的視覺樣式：
    | 屬性          | 值                                    |
    | 標籤格式      | "成員 X 的 Discord ID"                |
    | 邊框顏色      | 灰色（#4a5568）                        |
    | 背景色        | 半透明深色                             |
    | Placeholder   | "純數字（例如：123456789012345678）"   |
    | 高度          | 48px                                  |
    | 圓角          | 8px                                   |
  And 必填欄位應該有紅色星號，選填欄位應該有「選填」標示

Scenario: 人數限制 - 達到 6 人上限
  Given 我在步驟 3（成員資訊）
  And 我已經填寫了成員 2-6 的 Discord ID（共 5 人 + 隊長 = 6 人）
  When 我查看表單
  Then 不應該再出現新的成員欄位
  And 應該顯示提示訊息：
    | 文字        | "已達人數上限（6 人）"                  |
    | 顏色        | 霓虹橙（#FF9F00）                       |
    | 位置        | 成員欄位區域下方                        |
    | 圖示        | 警告圖示（⚠）                          |

Scenario: 成員欄位的錯誤狀態
  Given 我在步驟 3（成員資訊）
  When 我在成員 2 欄位輸入 "123abc"（包含非數字字元）
  And 我移開焦點
  Then 欄位應該顯示錯誤：
    | 邊框顏色    | 紅色（#F56565）                         |
    | 錯誤訊息    | "Discord ID 必須是數字組成的字串"        |
    | 訊息顏色    | 紅色（#F56565）                         |
    | 動畫        | 輕微晃動（shake）                       |

Scenario: 步驟 3 的「下一步」按鈕 - 未滿足最少人數
  Given 我在步驟 3（成員資訊）
  And 成員 2 欄位為空白（最少人數未達）
  When 我查看「下一步」按鈕
  Then 按鈕應該呈現 disabled 狀態（深灰色，無光暈）
  And 按鈕下方應該顯示提示：
    | 文字        | "至少需要 2 人才能創建隊伍"              |
    | 顏色        | 淺灰色（#a0aec0）                       |
    | 圖示        | 資訊圖示（i）                           |

Scenario: 步驟 3 的「下一步」按鈕 - 滿足條件
  Given 我在步驟 3（成員資訊）
  And 成員 2 的 Discord ID 已正確填寫（純數字格式）
  When 我查看「下一步」按鈕
  Then 按鈕應該變為可用狀態（霓虹藍色，有光暈）
  And 按鈕文字應該是："下一步：確認資訊 →"

# ====================================
# Epic 4: 步驟 4 - 確認與提交
# ====================================

Scenario: 進入步驟 4 - 資訊預覽
  Given 我從步驟 3 點擊「下一步」
  When 我進入步驟 4（確認與提交）
  Then 我應該看到完整的資訊預覽頁面：
    | 元素         | 描述                                    |
    | 步驟指示器   | 顯示 "4/4"                              |
    | 主標題       | "最後一步：確認你的隊伍資訊！"           |
    | 副標題       | "仔細檢查，提交後就可以開始冒險了 🎉"     |
    | 預覽區塊     | 分為 3 個區塊：隊伍、隊長、成員           |

Scenario: 隊伍資訊區塊的視覺設計
  Given 我在步驟 4（確認與提交）
  When 我查看「隊伍資訊」區塊
  Then 區塊應該呈現卡片樣式：
    | 屬性        | 值                                         |
    | 背景色      | 半透明深色（rgba(26, 32, 44, 0.6)）        |
    | 邊框        | 1px 霓虹藍色（#00F0FF）                     |
    | 圓角        | 12px                                       |
    | 內邊距      | 24px                                       |
    | 陰影        | 微妙的霓虹藍光暈                            |
    | 標題        | "⚡ 隊伍資訊"，霓虹藍色，18px 粗體         |
  And 區塊內應該顯示：
    | 欄位        | 值                                    |
    | 隊伍名稱    | [用戶填寫的隊名]，白色，16px           |
    | 隊伍簡介    | [用戶填寫的簡介]，淺灰色，14px         |
  And 右上角應該有「編輯」按鈕（小型，次要樣式）

Scenario: 隊長資訊區塊 - Discord ID 隱藏
  Given 我在步驟 4（確認與提交）
  When 我查看「隊長資訊」區塊
  Then Discord ID 應該部分隱藏，顯示為：
    | 原始值              | 顯示值                  |
    | 123456789012345678  | 123456******345678      |
  And 隱藏的部分應該用星號（*）表示
  And 保留前 6 位和後 6 位，中間用 6 個星號替代

Scenario: 成員資訊區塊 - 人數統計
  Given 我在步驟 4（確認與提交）
  And 我填寫了 3 個成員（含隊長共 4 人）
  When 我查看「成員資訊」區塊
  Then 區塊標題應該顯示：
    | 文字        | "👥 成員資訊（共 4 人）"                |
    | 顏色        | 霓虹藍色（#00F0FF）                     |
    | 字體大小    | 18px 粗體                              |
  And 應該列出所有成員的 Discord ID（部分隱藏）

Scenario: 編輯按鈕功能
  Given 我在步驟 4（確認與提交）
  When 我點擊「隊伍資訊」區塊的「編輯」按鈕
  Then 頁面應該跳回步驟 1
  And 步驟 1 的欄位應該預填我之前輸入的資料
  And 我修改完成後，應該能再次回到步驟 4

Scenario: 確認 Checkbox - 未勾選狀態
  Given 我在步驟 4（確認與提交）
  When 我查看確認 checkbox
  Then Checkbox 應該呈現未勾選狀態：
    | 屬性        | 值                                    |
    | 邊框        | 2px 霓虹藍色（#00F0FF）                |
    | 背景色      | 透明                                   |
    | 大小        | 20px x 20px                           |
    | 圓角        | 4px                                   |
  And 旁邊的文字應該是：
    | 文字        | "我確認以上資訊正確無誤，並同意組隊規則" |
    | 顏色        | 白色（#ffffff）                        |
    | 字體大小    | 14px                                  |

Scenario: 確認 Checkbox - 勾選狀態
  Given 我在步驟 4（確認與提交）
  And Checkbox 處於未勾選狀態
  When 我點擊 Checkbox
  Then Checkbox 應該變為勾選狀態：
    | 屬性        | 值                                         |
    | 背景色      | 霓虹藍色（#00F0FF）                         |
    | 勾勾圖示    | 白色（✓），從小到大彈出（scale 動畫，0.2 秒）|
    | 光暈        | 霓虹藍色光暈（box-shadow: 0 0 8px #00F0FF） |
  And「創建隊伍」按鈕應該從 disabled 變為可用狀態

Scenario: 「創建隊伍」按鈕 - Disabled 狀態
  Given 我在步驟 4（確認與提交）
  And 確認 Checkbox 未勾選
  When 我查看「創建隊伍」按鈕
  Then 按鈕應該呈現 disabled 狀態：
    | 屬性        | 值                                    |
    | 背景色      | 深灰色（#2d3748）                      |
    | 文字顏色    | 淺灰色（#718096）                      |
    | 文字        | "✨ 創建隊伍！"                        |
    | 不透明度    | 0.6                                    |
    | 游標        | not-allowed                            |

Scenario: 「創建隊伍」按鈕 - 可用狀態（賽博龐克風格）
  Given 我在步驟 4（確認與提交）
  And 確認 Checkbox 已勾選
  When 我查看「創建隊伍」按鈕
  Then 按鈕應該呈現帥氣的賽博龐克風格：
    | 屬性        | 值                                                              |
    | 背景色      | 霓虹藍 → 霓虹紫漸層（linear-gradient 45deg, #00F0FF, #B400FF） |
    | 文字顏色    | 白色（#ffffff）                                                  |
    | 文字        | "✨ 創建隊伍！"                                                 |
    | 字體粗細    | 粗體（bold）                                                     |
    | 字體大小    | 18px                                                            |
    | 內邊距      | 16px 40px                                                       |
    | 圓角        | 12px                                                            |
    | 陰影        | 霓虹紫色光暈（box-shadow: 0 0 30px #B400FF）                     |
    | 動畫        | 光暈脈衝動畫（pulse，2 秒循環）                                  |

Scenario: 「創建隊伍」按鈕 - Hover 狀態（超帥！）
  Given 我在步驟 4（確認與提交）
  And「創建隊伍」按鈕處於可用狀態
  When 我將滑鼠懸停在按鈕上
  Then 按鈕應該有超酷的 Hover 效果：
    | 屬性        | 值                                              |
    | 背景色      | 漸層反轉（#B400FF → #00F0FF）                   |
    | 縮放        | 輕微放大 scale(1.05)                            |
    | 陰影        | 光暈增強到最大（box-shadow: 0 0 50px #B400FF）  |
    | 過渡        | 所有變化 0.3 秒平滑過渡                         |
    | 粒子效果    | 按鈕周圍出現微小的霓虹粒子（Nice to Have）       |

Scenario: 提交中的 Loading 狀態
  Given 我在步驟 4（確認與提交）
  And 所有條件都滿足
  When 我點擊「創建隊伍」按鈕
  Then 按鈕應該立即進入 loading 狀態：
    | 屬性        | 值                                         |
    | 文字        | 消失，替換為 loading 動畫                   |
    | Loading     | 旋轉的霓虹六邊形或圓圈                      |
    | 背景色      | 保持漸層，但降低不透明度到 0.8              |
    | 狀態        | disabled（避免重複提交）                    |
    | 游標        | progress                                   |
  And API 調用應該在背景執行

# ====================================
# Epic 5: 提交成功回饋（Nice to Have）
# ====================================

Scenario: 成功提交的動畫效果（超級帥！）
  Given 我在步驟 4 點擊了「創建隊伍」
  And API 調用成功回傳
  When 提交成功時
  Then 應該觸發全屏成功動畫：
    | 動畫元素    | 描述                                         |
    | 粒子爆炸    | 從中心向外擴散的霓虹粒子（藍、紫、粉色）      |
    | 光暈脈衝    | 強烈的霓虹光暈從中心擴散（scale 0 → 3）      |
    | 背景模糊    | 原表單背景模糊（blur 10px）                  |
    | 持續時間    | 1.5 秒                                       |
  And 動畫播放時，背景應該暫時鎖定（無法交互）

Scenario: 成功訊息卡片
  Given 提交成功動畫播放完畢
  When 動畫結束後
  Then 應該顯示成功訊息卡片：
    | 屬性        | 值                                              |
    | 標題        | "🎉 隊伍創建成功！"                             |
    | 標題顏色    | 霓虹綠色（#00FF9F），36px 粗體                  |
    | 標題動畫    | 打字機效果（typewriter），0.5 秒                |
    | 副標題      | "[隊名] 已經準備好征戰沙場了！"                 |
    | 副標題顏色  | 白色，20px                                      |
    | 背景        | 半透明深色卡片，霓虹邊框，強烈光暈              |
    | 進入動畫    | 從下滑入（slide up），0.5 秒                    |

Scenario: 成功卡片的隊伍資訊
  Given 成功訊息卡片已顯示
  When 我查看卡片內容
  Then 應該顯示隊伍資訊：
    | 欄位        | 值                                    |
    | 隊伍名稱    | 大字體，霓虹藍色漸層，粗體             |
    | 總人數      | "共 X 人"，白色，16px                 |
    | 創建時間    | 當前時間，淺灰色，14px                 |
    | 隊伍 ID     | 自動生成的 ID，淺灰色，12px            |
  And 資訊應該以卡片方式呈現，賽博龐克風格

Scenario: 成功後的行動按鈕
  Given 成功訊息卡片已顯示
  When 我查看卡片下方的按鈕區域
  Then 應該顯示兩個按鈕：
    | 按鈕        | 樣式                                       |
    | 返回首頁    | 次要樣式（邊框霓虹藍，透明背景）            |
    | 前往管理    | 主要樣式（霓虹藍漸層，光暈）（未來功能）    |
  And 應該顯示倒數提示："5 秒後自動返回首頁"

Scenario: 自動跳轉倒數
  Given 成功訊息卡片已顯示
  When 5 秒倒數開始
  Then 應該顯示倒數計時器：
    | 屬性        | 值                                    |
    | 文字        | "5 秒後自動返回首頁"                   |
    | 數字顏色    | 霓虹藍色，閃爍動畫                     |
    | 位置        | 卡片底部中央                           |
    | 字體大小    | 14px                                  |
  And 每秒數字應該更新（5 → 4 → 3 → 2 → 1 → 0）
  And 倒數結束後，自動跳轉到首頁

# ====================================
# Epic 6: 錯誤處理與提示
# ====================================

Scenario: API 錯誤 - 隊名重複（提交時發現）
  Given 我在步驟 4 點擊了「創建隊伍」
  And API 回傳錯誤：隊名重複
  When 錯誤回傳時
  Then 應該顯示錯誤提示：
    | 屬性        | 值                                         |
    | 類型        | 全屏錯誤彈窗                                |
    | 圖示        | 紅色警告圖示（⚠），60px                    |
    | 標題        | "隊名已被使用"                              |
    | 訊息        | "此隊名已被其他隊伍使用，請返回步驟 1 更換隊名" |
    | 按鈕        | "返回步驟 1"，主要樣式（霓虹紅色）          |
    | 背景        | 半透明深色遮罩，模糊原頁面                   |
  And 點擊按鈕後，應該跳回步驟 1，並清空隊名欄位

Scenario: API 錯誤 - 網路錯誤
  Given 我在步驟 4 點擊了「創建隊伍」
  And 網路連線失敗
  When 錯誤發生時
  Then 應該顯示友善的錯誤提示：
    | 屬性        | 值                                         |
    | 標題        | "網路連線不穩定"                            |
    | 訊息        | "請檢查你的網路連線，或稍後再試"             |
    | 按鈕        | "重試"，主要樣式（霓虹藍色）                |
  And 點擊「重試」後，應該重新送出 API 請求

Scenario: API 錯誤 - 權限不足
  Given 我在步驟 4 點擊了「創建隊伍」
  And API 回傳錯誤：權限不足
  When 錯誤回傳時
  Then 應該顯示權限錯誤提示：
    | 屬性        | 值                                              |
    | 標題        | "權限不足"                                       |
    | 訊息        | "只有正式成員和課金玩家可以創建隊伍"              |
    | 按鈕        | "了解更多"，跳轉到說明頁面                       |
    | 次要按鈕    | "返回首頁"                                       |

Scenario: 表單驗證失敗 - 資料格式錯誤
  Given 我在步驟 4 點擊了「創建隊伍」
  And API 回傳錯誤：資料格式不正確
  When 錯誤回傳時
  Then 應該顯示具體的錯誤訊息：
    | 標題        | "資料驗證失敗"                              |
    | 訊息        | "部分資訊格式不正確，請檢查後重試"           |
    | 詳細資訊    | 列出具體哪些欄位有問題                       |
    | 按鈕        | "返回檢查"，關閉彈窗                         |
  And 關閉彈窗後，錯誤欄位應該高亮顯示

# ====================================
# Epic 7: 響應式設計
# ====================================

Scenario: 桌面版佈局（≥1024px）
  Given 我在桌面裝置上訪問 "/team/create"
  And 視窗寬度 ≥ 1024px
  When 頁面載入完成
  Then 表單應該呈現桌面版佈局：
    | 屬性        | 值                                    |
    | 表單寬度    | 最大 800px，置中顯示                   |
    | 左右邊距    | 自動（auto），置中對齊                 |
    | 步驟指示器  | 完整顯示，橫向排列                     |
    | 字體大小    | 標準大小（16px 基礎）                  |
    | 按鈕        | 標準大小（14px padding）               |

Scenario: 平板版佈局（768px - 1023px）
  Given 我在平板裝置上訪問 "/team/create"
  And 視窗寬度在 768px - 1023px 之間
  When 頁面載入完成
  Then 表單應該呈現平板版佈局：
    | 屬性        | 值                                    |
    | 表單寬度    | 90% 視窗寬度                          |
    | 左右邊距    | 5% 視窗寬度                           |
    | 步驟指示器  | 簡化顯示（縮小圖示）                   |
    | 字體大小    | 微調放大（18px 基礎）                  |
    | 按鈕        | 放大（16px padding），易於觸控         |

Scenario: 手機版佈局（<768px）
  Given 我在手機裝置上訪問 "/team/create"
  And 視窗寬度 < 768px
  When 頁面載入完成
  Then 表單應該呈現手機版佈局：
    | 屬性        | 值                                         |
    | 表單寬度    | 100% 視窗寬度                              |
    | 左右邊距    | 16px                                       |
    | 步驟指示器  | 簡化為 "1/4" 文字，置頂                     |
    | 字體大小    | 適當放大（18px 基礎）                       |
    | 輸入框      | 高度增加到 52px，易於點擊                   |
    | 按鈕        | 高度增加到 52px，寬度 100%                  |
    | 佈局        | 單欄垂直排列                                |

Scenario: 手機版 - Discord ID 鍵盤優化
  Given 我在手機裝置上訪問 "/team/create"
  And 我在步驟 2 或步驟 3（Discord ID 輸入）
  When 我點擊 Discord ID 輸入欄位
  Then 應該自動彈出數字鍵盤：
    | 屬性            | 值                                |
    | 鍵盤類型        | tel（電話號碼鍵盤）                |
    | input type      | "tel"                             |
    | inputmode       | "numeric"                         |
    | pattern         | "[0-9]*"                          |
  And 鍵盤應該只包含數字鍵，方便快速輸入

Scenario: 觸控裝置優化
  Given 我在觸控裝置上使用表單
  When 我檢查所有可交互元素
  Then 所有按鈕和輸入框的觸控區域應該：
    | 屬性        | 值                                    |
    | 最小高度    | 44px（iOS 建議最小觸控區域）           |
    | 最小寬度    | 44px                                  |
    | 間距        | 元素間至少 8px 間距，避免誤觸          |
  And Hover 效果應該在觸控裝置上禁用或替換為 Active 效果

# ====================================
# Scenario Outline: 跨瀏覽器視覺一致性
# ====================================

Scenario Outline: 在不同瀏覽器中的視覺效果
  Given 我使用 <瀏覽器> 訪問 "/team/create"
  When 頁面完全載入
  Then 所有視覺效果應該正確顯示：
    | 效果        | 狀態     |
    | 霓虹光暈    | <光暈>   |
    | 漸層背景    | <漸層>   |
    | 動畫效果    | <動畫>   |
    | 字體渲染    | <字體>   |
  
  Examples:
    | 瀏覽器        | 光暈   | 漸層   | 動畫   | 字體   |
    | Chrome 最新版 | 完美   | 完美   | 流暢   | 清晰   |
    | Safari 最新版 | 完美   | 完美   | 流暢   | 清晰   |
    | Firefox 最新版| 完美   | 完美   | 流暢   | 清晰   |
    | Edge 最新版   | 完美   | 完美   | 流暢   | 清晰   |

# ====================================
# 備註：實作優先級
# ====================================

# Must Have（P0）：
# - Epic 1-4：完整的多步驟表單流程
# - Epic 6：基本錯誤處理（C1）
# - Epic 7：響應式設計（桌面 + 手機）

# Nice to Have（P1）：
# - Epic 5：成功提交的帥氣動畫
# - Epic 6：進階錯誤處理（C2-C3）
# - Epic 7：跨瀏覽器完整測試

# ====================================
# 相關文件
# ====================================
# - User Story：sdd/log/user-story-team-creation-form-2025-10-20.md
# - 技術實作：sdd/log/team-creation-form-implementation-2025-10-20.md
# - API 文件：waterballsa/sdd-gs-appscript/API-ROUTING-GUIDE.md

